{"id":"nvim-beads-24h","title":"Extend save autocommand to handle new issue creation","description":"Modify the existing `BufWritePost` autocommand to detect and handle the creation workflow for new issue buffers (buffers with name matching `beads://issue/new*`).\n\nThis includes executing the create command, capturing the new issue ID, renaming the buffer, and reloading the content from the authoritative source.\n\nThis is part of Iteration 5: Create New Issues from the implementation plan.","design":"**Location**: `lua/nvim-beads/autocmds.lua`\n\n**Autocommand Logic**:\nModify existing `BufWritePost` callback to:\n1. Check if buffer name matches `beads://issue/new*`\n2. If yes, execute creation workflow; if no, execute existing update workflow\n\n**Creation Workflow**:\n1. Parse buffer content using `parse_markdown_to_issue()`\n2. Validate that title is non-empty (abort and notify user if missing)\n3. Build create command using `build_create_command()`\n4. Execute create command asynchronously\n5. Parse command output to extract new issue ID\n6. If creation successful:\n   - Rename buffer to `beads://issue/\u003cnew-id\u003e`\n   - Execute `bd show --json \u003cnew-id\u003e` to fetch authoritative state\n   - Reload buffer content with fresh data\n   - Mark buffer as unmodified\n   - Notify user of successful creation\n7. If creation fails:\n   - Keep buffer name as is\n   - Show error message to user\n   - Keep buffer in modified state\n\n**ID Extraction**:\n- Parse the JSON output from `bd create --json` to extract the new issue ID\n- Handle both success and error cases","acceptance_criteria":"- [ ] Saving a new issue buffer triggers creation workflow\n- [ ] Missing title shows error and prevents creation\n- [ ] Successful creation renames buffer to `beads://issue/\u003cnew-id\u003e`\n- [ ] Buffer content is reloaded from authoritative source after creation\n- [ ] User receives success notification with new issue ID\n- [ ] Failed creation keeps buffer in modified state with error message\n- [ ] Existing issue update workflow still works (no regression)\n- [ ] Integration test: Create minimal issue (title only) and verify buffer rename\n- [ ] Integration test: Create issue with all fields and verify data persistence\n- [ ] Integration test: Attempt to save with missing title and verify error\n- [ ] Unit test: Verify ID extraction from create command output","status":"closed","priority":1,"issue_type":"task","assignee":"Claude","created_at":"2025-11-30T21:06:13.019365381-07:00","updated_at":"2025-11-30T21:46:47.663989468-07:00","closed_at":"2025-11-30T21:46:47.663989468-07:00","dependencies":[{"issue_id":"nvim-beads-24h","depends_on_id":"nvim-beads-daa","type":"blocks","created_at":"2025-11-30T21:06:13.021430239-07:00","created_by":"daemon"},{"issue_id":"nvim-beads-24h","depends_on_id":"nvim-beads-a9s","type":"blocks","created_at":"2025-11-30T21:06:13.023731038-07:00","created_by":"daemon"},{"issue_id":"nvim-beads-24h","depends_on_id":"nvim-beads-w09","type":"blocks","created_at":"2025-11-30T21:06:21.187695911-07:00","created_by":"daemon"}]}
{"id":"nvim-beads-2ry","title":"Extend issue formatter to support full buffer format with YAML frontmatter","description":"The current `format_issue_to_markdown()` function in `lua/nvim-beads/issue.lua` was designed for Telescope preview and may not include all fields required for the editable buffer format.\n\nThis task extends the formatter to output the complete buffer format as specified in detailed-requirements.md section 3.2, including:\n- YAML frontmatter with all metadata fields (id, title, type, status, priority, parent, dependencies, labels, timestamps)\n- Markdown sections (Description, Acceptance Criteria, Design, Notes)\n\nThe formatter should produce output that matches the exact format shown in the requirements, with proper YAML delimiters and section headers.","design":"Extend the existing `format_issue_to_markdown()` function or create a new function variant specifically for buffer formatting.\n\nKey implementation details:\n- Add YAML frontmatter generation with `---` delimiters\n- Include all metadata fields from the issue JSON\n- Mark read-only fields with comments (id, created_at, updated_at, closed_at)\n- Handle optional fields gracefully (parent, dependencies, labels, closed_at)\n- Format arrays properly (dependencies, labels) as YAML lists\n- Preserve existing Markdown section generation\n- Ensure proper blank line spacing between sections\n\nReference the JSON schema from bd show output and the buffer format specification in detailed-requirements.md section 3.2.","acceptance_criteria":"- [ ] Formatter outputs valid YAML frontmatter enclosed in `---` delimiters\n- [ ] All required metadata fields are included: id, title, type, status, priority, timestamps\n- [ ] Optional fields (parent, dependencies, labels) are included when present\n- [ ] Dependencies and labels are formatted as YAML arrays\n- [ ] Markdown sections (Description, Acceptance Criteria, Design, Notes) follow the frontmatter\n- [ ] Unit tests verify correct formatting for issues with various field combinations\n- [ ] Unit tests verify optional fields are handled correctly (present vs absent)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-30T19:03:57.176916401-07:00","updated_at":"2025-11-30T19:10:17.156908602-07:00","closed_at":"2025-11-30T19:10:17.156908602-07:00"}
{"id":"nvim-beads-2s3","title":"Consolidate duplicated newline-splitting logic into a shared utility function","description":"### Observation\n\nThe logic to split a multi-line string into a table of individual lines is implemented identically in multiple places, specifically:\n- `autocmds.lua` (in `handle_new_issue_save` and `handle_existing_issue_save`)\n- `issue.lua` (in `open_issue_buffer` and `open_new_issue_buffer`)\n\nThis code duplication makes the code harder to maintain.\n\n### Recommendation\n\n1.  Create a new utility module at `lua/nvim-beads/util.lua`.\n2.  Implement a function within this module, such as `M.split_multiline_string(str)`, that takes a string as input and returns a table of lines.\n3.  Replace the duplicated logic in `autocmds.lua` and `issue.lua` with calls to this new shared utility function.\n4.  Ensure the new function correctly handles empty strings, strings with no newlines, and strings with leading/trailing newlines.\n\n### Verification\n\n1.  All existing unit tests should continue to pass.\n2.  Create a new test file, `spec/nvim-beads/util_spec.lua`, with specific unit tests for the `split_multiline_string` function to cover various edge cases.\n3.  Manually test the save workflow (`:w` in a `beads://` buffer) for issues that have multi-line content in fields like `description` or `notes`. Verify that the content is parsed, saved, and reloaded into the buffer correctly without being altered.","status":"closed","priority":3,"issue_type":"task","assignee":"claude","created_at":"2025-12-01T20:52:08.466249715-07:00","updated_at":"2025-12-02T18:15:55.254347081-07:00","closed_at":"2025-12-02T18:15:55.254347081-07:00"}
{"id":"nvim-beads-2s7","title":"Update 'Beads list' command to accept arguments","description":"This task updates the 'Beads list' command definition to accept a variable number of arguments, which will be used for filtering.","design":"### Background\nThe `Beads list` command currently shows all issues. To allow users to filter this list directly from the command line, we need to allow arguments to be passed to it. This is the first step in implementing the plan laid out in `doc/dev/design/beads-list-filtering-design.md`.\n\n### Implementation Details\n- **File to Modify:** `lua/nvim-beads/commands.lua`\n- **Function to Modify:** The `vim.api.nvim_create_user_command` call for the `list` subcommand.\n- **Change:**\n    1.  Modify the `nargs` property from its current value to `'*'`. This allows the command to accept zero or more space-separated arguments.\n    2.  Ensure the arguments, which Neovim provides in the `opts.fargs` table, are captured.\n    3.  Pass the `opts.fargs` table to the core function responsible for launching the Telescope picker (likely `core.list_issues`).","acceptance_criteria":"- The `:Beads list` command can be executed with zero, one, or two arguments without causing an error (e.g., `:Beads list open`, `:Beads list open bug`).\n- The arguments passed to the command (e.g., `{'open', 'bug'}`) are correctly received by the Lua function that will eventually handle the filtering logic.\n- Executing `:Beads list` with no arguments continues to work as it did before, showing all issues.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-01T21:43:47.317274947-07:00","updated_at":"2025-12-02T17:55:14.585553314-07:00","closed_at":"2025-12-02T17:55:14.585553314-07:00"}
{"id":"nvim-beads-3ip","title":"Implement core bd executor","description":"Create an async function in lua/nvim-beads/core.lua to execute bd commands via vim.system, parse JSON output, and handle errors properly.","design":"Use vim.system() with text=true option for clean output. JSON parsing with pcall for error handling. Function signature: execute_bd(args, opts) where args is table of command arguments.","acceptance_criteria":"- core.lua exports an execute_bd() function\n- Function uses vim.system() for async execution\n- Parses JSON output using vim.json.decode()\n- Returns parsed data on success\n- Returns nil + error message on failure\n- Handles both command failures and JSON parse errors","status":"closed","priority":1,"issue_type":"task","assignee":"Claude","created_at":"2025-11-30T17:08:46.96819693-07:00","updated_at":"2025-11-30T17:53:01.981349049-07:00","closed_at":"2025-11-30T17:53:01.981349049-07:00","dependencies":[{"issue_id":"nvim-beads-3ip","depends_on_id":"nvim-beads-7zt","type":"blocks","created_at":"2025-11-30T17:09:19.586232116-07:00","created_by":"daemon"}]}
{"id":"nvim-beads-3tc","title":"Harden shell command construction to prevent injection vulnerabilities","description":"### Observation\n\nSeveral parts of the codebase construct shell commands by concatenating strings. This is visible in:\n- `issue.lua` (`generate_update_commands`)\n- `autocmds.lua` (`handle_new_issue_save`, `handle_existing_issue_save`)\n\nWhile a `shell_escape` function exists, this approach is inherently less safe than passing arguments as a table to `vim.system`, as it can be vulnerable to shell injection if the escaping is imperfect. The `core.execute_bd` function already uses the safer, table-based approach.\n\n### Recommendation\n\nRefactor all shell command execution to use the table-based `vim.system` calling convention, which avoids manual shell escaping.\n\n1.  Modify `issue.generate_update_commands` to return a list of tables, where each inner table is a sequence of arguments for a single command (e.g., `{{'bd', 'update', issue.id, '--title', 'new title'}, ...}`).\n2.  Update the loop in `autocmds.handle_existing_issue_save` to iterate over this new structure and call `vim.system(cmd_table)` for each command.\n3.  Refactor the command construction in `autocmds.handle_new_issue_save` to build a command table instead of a command string.\n\n### Verification\n\n1.  All existing unit tests must pass. The tests for `issue.generate_update_commands` will need to be updated to assert against the new data structure.\n2.  Perform manual testing with issue fields (like titles or descriptions) that contain special shell characters, such as `'\"`, `'`, `!`, `\u0026`, `|`, `;`, `$`, `(`, and `)`.\n3.  Confirm that creating and updating issues with such characters succeeds without errors and that the characters are preserved correctly in the underlying issue data. For example, a title like `\"Fix critical bug in tokenizer's loop \u0026\u0026 parser\"` should not fail the save process.","status":"closed","priority":3,"issue_type":"task","assignee":"Claude","created_at":"2025-12-01T20:52:11.274765435-07:00","updated_at":"2025-12-02T20:02:37.524148662-07:00","closed_at":"2025-12-02T20:02:37.524158649-07:00"}
{"id":"nvim-beads-48r","title":"Implement Save Autocommand Integration","description":"Wire together all the pieces to implement the save workflow for beads:// buffers. When a user saves an issue buffer, the autocommand should parse the buffer, detect changes, execute the appropriate `bd` commands, and reload the buffer with the authoritative state.\nThis is the orchestration layer that connects the parser, diff logic, and command generation into a working feature.\n\nAdding some more text in the description here.","design":"**Implementation location:** `lua/nvim-beads/autocmds.lua`\n\n**Workflow:**\n\n1. Create `BufWritePost` autocommand for `beads://issue/*` buffers\n2. In the callback:\n   a. Extract issue ID from buffer name\n   b. Get buffer content using `vim.api.nvim_buf_get_lines()`\n   c. Parse buffer using `parse_markdown_to_issue()`\n   d. Fetch original state using `bd show --json \u003cid\u003e` (via core.lua executor)\n   e. Diff the states using `diff_issues()`\n   f. Generate commands using `generate_update_commands()`\n   g. Execute each command sequentially (via core.lua executor)\n   h. If all succeed, reload buffer from authoritative source\n   i. If any fail, report error to user via `vim.notify()`\n**Key considerations:**\n- Error handling at each step (parse failure, bd command failure, etc.)\n- Preserve cursor position after reload if possible\n- Clear modified flag after successful save\n- Atomic execution: if one command fails, report error and don't reload\n**Testing approach:**\n- Minimal integration test or manual testing (unit tests cover the core logic)\n- Could mock `vim.api` and core executor for a basic integration test","acceptance_criteria":"- [ ] `lua/nvim-beads/autocmds.lua` created with `BufWritePost` autocommand\n- [ ] Autocommand triggers on `beads://issue/*` pattern\n- [ ] Save workflow implemented:\n  - [ ] Parses buffer content\n  - [ ] Fetches original state from `bd show`\n  - [ ] Diffs the states\n  - [ ] Generates update commands\n  - [ ] Executes commands sequentially\n  - [ ] Reloads buffer on success\n  - [ ] Reports errors on failure\n- [ ] Error handling covers all failure points\n- [ ] Manual testing demonstrates:\n  - [ ] Editing title and saving updates the issue\n  - [ ] Editing status and saving updates the issue\n  - [ ] Adding/removing labels works correctly\n  - [ ] Adding/removing dependencies works correctly\n  - [ ] Editing text sections (description, etc.) works correctly\n  - [ ] Buffer reloads with updated content after save\n- [ ] Cursor position is preserved after reload (if feasible)","notes":"## Implementation Complete\nCreated `lua/nvim-beads/autocmds.lua` with the following implementation:\n\n### Key Features\n1. **BufWriteCmd autocommand** for `beads://issue/*` pattern\n2. **Complete save workflow**:\n   - Parses buffer content using `parse_markdown_to_issue()`\n   - Fetches original state via `bd show --json`\n   - Diffs states using `diff_issues()`\n   - Generates update commands using `generate_update_commands()`\n   - Executes commands sequentially via shell\n   - Reloads buffer on success with updated content\n3. **Error handling** at every step (parse, fetch, command execution)\n4. **Cursor position preservation** after reload\n5. **Modified flag management** (cleared after successful save)\n6. **Special handling for parent removal** (needs original parent ID lookup)\n\n### Integration\n- Wired into `plugin/nvim-beads.lua` via `require(\"nvim-beads.autocmds\").setup()`\n- Uses `BufWriteCmd` (correct for `acwrite` buffers)\n\n### Testing\n- All existing unit tests pass (125 tests)\n- Manual test guide created in `MANUAL_TEST.md`\n- Ready for manual integration testing\n\n### Files Modified\n1. `lua/nvim-beads/autocmds.lua` (new file)\n2. `plugin/nvim-beads.lua` (added setup() call)\n3. `MANUAL_TEST.md` (testing guide)\nThe implementation follows the design document exactly and integrates all the previously implemented pieces (parser, diff, command generation) into a working save workflow.","status":"closed","priority":1,"issue_type":"task","assignee":"Claude","created_at":"2025-11-30T20:11:24.735604837-07:00","updated_at":"2025-11-30T21:01:05.825062479-07:00","closed_at":"2025-11-30T21:01:05.825062479-07:00","dependencies":[{"issue_id":"nvim-beads-48r","depends_on_id":"nvim-beads-4y7","type":"blocks","created_at":"2025-11-30T20:11:28.503817756-07:00","created_by":"daemon"}]}
{"id":"nvim-beads-4y7","title":"Implement Command Generation with Tests","description":"Implement the command generation logic that converts a list of changes (from the diff function) into the appropriate `bd` CLI commands to apply those changes.\n\nThis is a pure function that takes the structured changes and generates a list of executable `bd` commands following the CLI mapping defined in the detailed requirements.","design":"**Function signature:** `generate_update_commands(issue_id, changes) -\u003e commands`\n\n**Input:**\n- `issue_id`: The issue ID (e.g., \"bd-1\")\n- `changes`: Change table from `diff_issues()`\n\n**Output:** List of `bd` command strings to execute in order\n\n**Command mapping (from detailed-requirements.md):**\n- **Metadata/text fields:** `bd update \u003cid\u003e --title \"...\" --priority N --description \"...\" --acceptance \"...\" --design \"...\" --notes \"...\"`\n- **Status:** \n  - `bd update \u003cid\u003e --status \u003cstatus\u003e` for in_progress/blocked\n  - `bd close \u003cid\u003e` for closed\n  - `bd reopen \u003cid\u003e` for open (if previously closed)\n- **Labels:**\n  - `bd label add \u003cid\u003e \u003clabel\u003e` (one per addition)\n  - `bd label remove \u003cid\u003e \u003clabel\u003e` (one per removal)\n- **Dependencies:**\n  - `bd dep add \u003cid\u003e \u003cdep-id\u003e --type blocks` (one per addition)\n  - `bd dep remove \u003cid\u003e \u003cdep-id\u003e` (one per removal)\n- **Parent:**\n  - `bd dep add \u003cid\u003e \u003cparent-id\u003e --type parent-child` (if added/changed)\n  - `bd dep remove \u003cid\u003e \u003cold-parent-id\u003e` (if removed/changed)\n\n**Implementation approach:**\n1. Process changes in order: parent/deps first, then labels, then status, then metadata/text\n2. Generate appropriate command strings with proper escaping\n3. Return ordered list of commands\n\n**Key considerations:**\n- Proper shell escaping for text fields with quotes/special chars\n- Handle status transitions correctly (close vs update --status)\n- Parent changes may require removing old parent first","acceptance_criteria":"- [ ] Test file created at `spec/nvim-beads/commands_spec.lua`\n- [ ] Test cases cover:\n  - [ ] Metadata field updates (title, priority)\n  - [ ] Text section updates (description, acceptance, design, notes)\n  - [ ] Status update to in_progress/blocked\n  - [ ] Status change to closed (generates `bd close`)\n  - [ ] Status change to open (generates `bd reopen`)\n  - [ ] Label additions and removals\n  - [ ] Dependency additions and removals\n  - [ ] Parent addition, removal, and change\n  - [ ] Multiple simultaneous changes generating correct command sequence\n  - [ ] Proper escaping of special characters in text fields\n- [ ] `generate_update_commands()` function implemented in `lua/nvim-beads/issue.lua`\n- [ ] All tests pass when run with `busted`\n- [ ] Generated commands match the CLI mapping from detailed-requirements.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-30T20:11:03.665813837-07:00","updated_at":"2025-11-30T20:43:03.232424293-07:00","closed_at":"2025-11-30T20:43:03.232424293-07:00","dependencies":[{"issue_id":"nvim-beads-4y7","depends_on_id":"nvim-beads-v3m","type":"blocks","created_at":"2025-11-30T20:11:24.541079301-07:00","created_by":"daemon"}]}
{"id":"nvim-beads-5do","title":"Refactor large issue.lua module into smaller, single-responsibility modules","description":"### Observation\n\nThe `issue.lua` module currently handles a wide range of responsibilities, including:\n- Data parsing (`parse_markdown_to_issue`)\n- Data formatting (`format_issue_to_markdown`)\n- Data comparison (`diff_issues`)\n- Command generation (`generate_update_commands`)\n- Neovim buffer management and UI (`open_issue_buffer`, `open_new_issue_buffer`)\n\nThis makes the module large and violates the Single Responsibility Principle, making it harder to test and maintain.\n\n### Recommendation\n\nRefactor `issue.lua` by splitting its functionality into smaller, more focused modules under a new `lua/nvim-beads/issue/` directory.\n\n1.  Create a new directory: `lua/nvim-beads/issue/`.\n2.  Consider moving the contents of `issue.lua` to a new `lua/nvim-beads/issue/init.lua` to act as a facade, or refactor all calls to point to the new modules directly.\n3.  Create the following new modules:\n    -   `lua/nvim-beads/issue/parser.lua`: For `parse_markdown_to_issue`.\n    -   `lua/nvim-beads/issue/formatter.lua`: For `format_issue_to_markdown`.\n    -   `lua/nvim-beads/issue/diff.lua`: For `diff_issues` and `generate_update_commands`.\n4.  Move buffer-related functions to a separate module, as they are a UI concern:\n    -   Create `lua/nvim-beads/buffer.lua` for `open_issue_buffer` and `open_new_issue_buffer`.\n5.  Update all `require` statements throughout the codebase (`autocmds.lua`, `commands.lua`, etc.) to point to the new module paths.\n\n### Verification\n\n1.  All existing unit tests in the `spec/` directory must pass after the refactoring. Tests related to the old `issue.lua` module will need to be updated to reflect the new file structure.\n2.  Perform manual end-to-end testing of the core user workflows:\n    -   Creating a new issue (`:Beads create task`).\n    -   Saving the new issue buffer to trigger creation via `bd`.\n    -   Opening an existing issue (`:Beads open \u003cid\u003e`).\n    -   Modifying and saving an existing issue to trigger an update.\n    -   Listing issues via Telescope (`:Beads list`).","status":"closed","priority":3,"issue_type":"task","assignee":"Claude","created_at":"2025-12-01T20:51:58.862730092-07:00","updated_at":"2025-12-02T18:10:15.198388238-07:00","closed_at":"2025-12-02T18:10:15.198388238-07:00"}
{"id":"nvim-beads-63o","title":"Integration test for preview functionality","description":"Verify that the preview functionality works correctly end-to-end in a real Neovim session with actual bd data. Can be manual testing initially, automated later if needed.","design":"Manual testing checklist:\n1. Open Neovim in a project with bd initialized\n2. Run :Beads command\n3. Use j/k to navigate through issues\n4. Verify preview pane shows on the right\n5. Check that preview content uses correct format:\n   - YAML frontmatter with type (not issue_type)\n   - Single # headings (not ##)\n   - Dependencies in frontmatter, not markdown body\n   - Parent shown separately in frontmatter when present\n6. Test with different issue types (bug, feature, task)\n7. Test with issues that have/don't have optional fields (parent, labels, design, etc.)\n8. Verify syntax highlighting works\n9. Test error handling (e.g., malformed issue data)\n\nDocument any issues found for follow-up tasks","acceptance_criteria":"- Manual test run completed in real Neovim session\n- Preview shows correct content format per requirements doc section 3.2\n- Verified single # headings (not ##)\n- Verified dependencies in YAML frontmatter (not markdown)\n- Verified parent field separate from dependencies when present\n- Verified issue_type -\u003e type field name transformation\n- Syntax highlighting works properly\n- No Lua errors when navigating picker\n- Performance is acceptable (no noticeable lag)\n- Issues/bugs documented as new bd tasks if found\n- Can optionally create automated integration test if time permits","status":"closed","priority":2,"issue_type":"task","assignee":"Claude","created_at":"2025-11-30T18:24:31.507794441-07:00","updated_at":"2025-11-30T18:58:00.514968507-07:00","closed_at":"2025-11-30T18:58:00.514968507-07:00","dependencies":[{"issue_id":"nvim-beads-63o","depends_on_id":"nvim-beads-zzt","type":"blocks","created_at":"2025-11-30T18:24:46.445300254-07:00","created_by":"daemon"}]}
{"id":"nvim-beads-6p1","title":"Implement special handling for 'ready' state filter","description":"This task implements the special data-fetching logic required for the 'ready' state, which uses a more efficient command.","design":"### Background\nThe design plan specifies a performance optimization for filtering by the 'ready' state. Instead of fetching all issues with `bd list --json` and filtering in Lua, we can directly fetch only the ready issues using the `bd ready --json` command. This task implements that special case.\n\n### Implementation Details\n- **File to Modify:** `lua/telescope/_extensions/nvim_beads/init.lua`\n- **Function to Modify:** The main function that launches the beads picker.\n- **Logic:**\n    1.  After parsing the arguments, check if `filters.state` is equal to `'ready'`.\n    2.  If it is, the command executed should be `bd ready --json`, not `bd list --json`.\n    3.  If a `type` filter is also present (e.g., `:Beads list ready bug`), the type filtering should still be applied in Lua to the results of the `bd ready --json` command.\n    4.  If the state is anything other than `'ready'`, the logic should fall back to the standard `bd list --json` approach.","acceptance_criteria":"- Running `:Beads list ready` executes the `bd ready --json` command and displays only ready issues.\n- Running `:Beads list ready feature` executes `bd ready --json` and then filters the results in Lua to show only issues of type 'feature'.\n- Running `:Beads list open` executes the `bd list --json` command as normal.\n- The correct command (`bd list` vs. `bd ready`) is chosen based *only* on the state argument.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-01T21:44:12.922578644-07:00","updated_at":"2025-12-02T21:03:41.670654069-07:00","closed_at":"2025-12-02T21:03:41.670654069-07:00"}
{"id":"nvim-beads-7nn","title":"Add validation for 'Beads list' filter arguments","description":"This task adds robust error handling to the filter parsing logic to ensure users are notified of invalid input.","design":"### Background\nWhen a user provides an invalid filter argument (e.g., a state or type that does not exist), the plugin should provide immediate and clear feedback instead of failing silently or showing an empty list. This ensures a good user experience and makes the feature easier to use.\n\n### Implementation Details\n- **File to Modify:** `lua/nvim-beads/core.lua`\n- **Function to Modify:** `parse_list_filters(fargs)` (or a function that calls it).\n- **Logic:**\n    1.  After parsing the arguments, check if any of them could not be identified as a valid state, type, or the keyword `all`.\n    2.  If an invalid argument is found, the filtering process should be halted.\n    3.  An informative error message should be displayed to the user using `vim.notify`.\n    4.  The error message should specify which argument was invalid, for example: `Error: Invalid issue state or type 'foobar'`.","acceptance_criteria":"- Running `:Beads list open foobar` triggers a `vim.notify` error message.\n- The error message clearly indicates that 'foobar' is an invalid argument.\n- When an invalid argument is provided, the Telescope window does not open.\n- Providing a valid state but an invalid type (e.g., `:Beads list open baz`) also triggers the error.\n- Providing an invalid state but a valid type (e.g., `:Beads list foo bug`) also triggers the error.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-01T21:44:02.261676571-07:00","updated_at":"2025-12-02T21:03:35.177106609-07:00","closed_at":"2025-12-02T21:03:35.177106609-07:00"}
{"id":"nvim-beads-7zt","title":"Project scaffolding and cleanup","description":"Rename plugin/plugin_template.lua to plugin/nvim-beads.lua, create initial module structure (lua/nvim-beads/core.lua, lua/nvim-beads/commands.lua, lua/telescope/_extensions/nvim_beads/init.lua), remove template-specific example code and tests, and update project documentation.","design":"Follow Neovim plugin best practices from neovim-lua-plugin-reference.md:\n- Keep plugin/*.lua lightweight (defer require calls)\n- Use proper module structure under lua/\n- Telescope extension goes in lua/telescope/_extensions/","acceptance_criteria":"- plugin/nvim-beads.lua exists and plugin/plugin_template.lua is removed\n- Directory structure created: lua/nvim-beads/, lua/telescope/_extensions/nvim_beads/\n- Core module files created (can be empty stubs initially)\n- Template example code removed\n- README.md updated with basic project info","status":"closed","priority":1,"issue_type":"task","assignee":"Claude","created_at":"2025-11-30T17:08:46.057428882-07:00","updated_at":"2025-11-30T17:40:53.480954819-07:00","closed_at":"2025-11-30T17:40:53.480954819-07:00"}
{"id":"nvim-beads-a1g","title":"Create :Beads user command","description":"Define the :Beads command in plugin/nvim-beads.lua that invokes the Telescope picker, and document the telescope extension loading requirement.","design":"Follow lazy loading pattern from neovim-lua-plugin-reference.md: defer require to command execution. Add docs about telescope extension loading in README or help docs.","acceptance_criteria":"- :Beads command defined in plugin/nvim-beads.lua\n- Command uses deferred require() for lazy loading\n- Command calls the telescope picker\n- Documentation added for require('telescope').load_extension('nvim_beads') requirement\n- Command works when invoked","status":"closed","priority":1,"issue_type":"task","assignee":"Claude","created_at":"2025-11-30T17:08:48.808646329-07:00","updated_at":"2025-11-30T18:19:55.921334476-07:00","closed_at":"2025-11-30T18:19:55.921334476-07:00","dependencies":[{"issue_id":"nvim-beads-a1g","depends_on_id":"nvim-beads-k8m","type":"blocks","created_at":"2025-11-30T17:09:22.380046288-07:00","created_by":"daemon"}]}
{"id":"nvim-beads-a9s","title":"Implement create command generation logic","description":"Implement the logic to generate the `bd create` command string from parsed buffer content. This function needs to construct the command with all relevant flags based on what fields are populated in the new issue buffer.\n\nThe command must handle the required title field and optional fields like priority, description, acceptance criteria, design, labels, parent, and dependencies.\n\nThis is part of Iteration 5: Create New Issues from the implementation plan.","design":"**Location**: `lua/nvim-beads/issue.lua` or new `lua/nvim-beads/commands_builder.lua`\n\n**Function Signature**:\n```lua\nfunction M.build_create_command(parsed_issue)\n```\n\n**Command Construction**:\nBase command: `bd create \"\u003ctitle\u003e\" --type \u003ctype\u003e`\n\n**Required Fields**:\n- `title` - Must be non-empty, abort if missing\n- `type` - From buffer name or frontmatter\n\n**Optional Fields** (add flag only if populated):\n- `--priority \u003cp\u003e` if priority is set\n- `--description \"...\"` if Description section has content\n- `--acceptance \"...\"` if Acceptance Criteria section has content  \n- `--design \"...\"` if Design section has content\n- `--labels \"l1,l2\"` if labels list is non-empty\n- `--parent \u003cid\u003e` if parent field is set\n- `--deps \"id1,id2\"` if dependencies list is non-empty\n\n**String Escaping**:\n- Properly escape double quotes in field values\n- Handle newlines in multi-line text fields (description, etc.)\n\n**Return Value**:\n- Return the complete command string ready for execution\n- Return error if title is missing or invalid","acceptance_criteria":"- [ ] `build_create_command()` generates correct command with only title and type\n- [ ] Command includes all optional flags when fields are populated\n- [ ] Missing title returns error instead of generating invalid command\n- [ ] Multi-line text fields are properly escaped\n- [ ] Labels are correctly formatted as comma-separated list\n- [ ] Dependencies are correctly formatted as comma-separated list\n- [ ] Unit test: Minimal issue (title + type only) generates correct command\n- [ ] Unit test: Issue with all fields populated generates correct command\n- [ ] Unit test: Issue with missing title returns error\n- [ ] Unit test: Special characters in text fields are properly escaped\n- [ ] Unit test: Empty optional fields are omitted from command","status":"closed","priority":1,"issue_type":"task","assignee":"Claude","created_at":"2025-11-30T21:05:42.594170273-07:00","updated_at":"2025-11-30T21:24:54.353618726-07:00","closed_at":"2025-11-30T21:24:54.353618726-07:00"}
{"id":"nvim-beads-akf","title":"Implement issue formatter with full metadata","description":"Implement format_issue_to_markdown(issue) function in lua/nvim-beads/issue.lua that converts a bd issue table into a list of strings representing YAML frontmatter followed by Markdown body content.","design":"Function signature: format_issue_to_markdown(issue) -\u003e string[]\n\nOutput format must match requirements doc section 3.2 exactly:\n\n```\n---\nid: bd-1\ntitle: My Issue Title\ntype: feature\nstatus: open\npriority: 2\nparent: bd-100\ndependencies:\n  - bd-120\n  - bd-121\nlabels:\n  - ui\n  - backend\ncreated_at: 2023-10-27T10:00:00Z\nupdated_at: 2023-10-27T12:00:00Z\nclosed_at: null\n---\n\n# Description\n\nA clear, detailed explanation of the issue.\n\n# Acceptance Criteria\n\nA list of criteria that must be met for the issue to be considered complete.\n\n# Design\n\nTechnical design notes or implementation plan.\n\n# Notes\n\nAny other relevant information.\n```\n\nKey requirements:\n- Use `type` in frontmatter (not `issue_type` - transform from bd JSON)\n- Use single `#` for section headings (not `##`)\n- Dependencies go in YAML frontmatter as list (not markdown section)\n- Parent is separate frontmatter field (not in dependencies)\n- All timestamps use ISO format with Z timezone\n- Optional fields: parent, labels, closed_at, assignee, description, design, acceptance_criteria, notes\n- Omit empty/null sections entirely","acceptance_criteria":"- issue.lua module exists with format_issue_to_markdown function\n- Returns array of strings (one per line) for buffer insertion\n- YAML frontmatter uses `type` field (mapped from bd's `issue_type`)\n- Section headings use single # (not ##)\n- Dependencies list in YAML frontmatter (not markdown body)\n- Parent shown separately in frontmatter when present\n- Timestamp fields: created_at, updated_at, closed_at\n- Optional sections omitted when null/empty\n- Function uses types from types.lua\n- Output matches requirements doc section 3.2 exactly","status":"closed","priority":1,"issue_type":"task","assignee":"Claude","created_at":"2025-11-30T18:24:30.526515502-07:00","updated_at":"2025-11-30T18:45:29.556289743-07:00","closed_at":"2025-11-30T18:45:29.556289743-07:00","dependencies":[{"issue_id":"nvim-beads-akf","depends_on_id":"nvim-beads-d59","type":"blocks","created_at":"2025-11-30T18:24:45.997831096-07:00","created_by":"daemon"}]}
{"id":"nvim-beads-ctb","title":"Refactor core.lua to be a pure service layer for the bd CLI","description":"### Observation\n\nThe `core.lua` module is intended to be a low-level service layer that provides a clean interface to the `bd` command-line tool. However, it contains the `create_issue` function, which is higher-level application logic. This function orchestrates fetching a template and then opening a new Neovim buffer, which goes beyond the module's primary responsibility of simply executing `bd` commands.\n\n### Recommendation\n\nRefactor `core.lua` to be a pure service layer by relocating the orchestration logic.\n\n1.  Move the implementation logic from `core.create_issue` into the `impl` function for the `create` subcommand, located in `lua/nvim-beads/commands.lua`.\n2.  The `impl` function in `commands.lua` will now be responsible for calling `core.fetch_template` and `issue.open_new_issue_buffer` (or its new location after refactoring `issue.lua`).\n3.  Remove the `create_issue` function from `core.lua` entirely.\n\n### Verification\n\n1.  All existing unit tests should pass. Test files like `spec/nvim-beads/commands_spec.lua` and `spec/nvim-beads/core_spec.lua` may require updates to reflect the moved logic.\n2.  Manually test the `:Beads create \u003ctype\u003e` command (e.g., `:Beads create feature`). The command should successfully fetch the correct template and open a new, pre-filled issue buffer as before.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-01T20:52:10.131024674-07:00","updated_at":"2025-12-02T18:23:13.236248556-07:00","closed_at":"2025-12-02T18:23:13.236248556-07:00"}
{"id":"nvim-beads-czj","title":"Telescope preview collapses blank lines in issue body","description":"## Summary\n\nThe issue preview in the Telescope picker for \"Beads list\" incorrectly collapses blank lines from the issue's description and other multi-line text fields. When an issue is opened in a full buffer, the blank lines are preserved, leading to an inconsistent presentation of the content.\n\n## Steps to Reproduce\n\n1. Create a new issue with a description that contains blank lines (e.g., \"Line 1\\n\\nLine 3\").\n2. Run `:Telescope nvim_beads list`.\n3. Observe the preview for the newly created issue. The blank line between \"Line 1\" and \"Line 3\" is missing.\n4. Select the issue to open it in a full buffer.\n5. Observe that the blank line is correctly displayed in the full buffer.\n\n## Expected Behavior\n\nThe Telescope preview should render the issue body exactly as it appears in the full issue view, including any blank lines.\n\n## Actual Behavior\n\nThe Telescope preview collapses multiple consecutive newlines into a single one, effectively removing blank lines.\n\n## Root Cause Analysis\n\nThe root cause of this bug is in the `create_issue_previewer` function within `lua/telescope/_extensions/nvim_beads/init.lua`. The code responsible for splitting lines containing newlines uses the following logic:\n\n```lua\nfor subline in line:gmatch(\"[^\\n]+\") do\n    table.insert(flattened_lines, subline)\nend\n```\n\nThe pattern `[^\\n]+` matches one or more non-newline characters. When it encounters a blank line (which is essentially two consecutive newline characters `\\n\\n`), there are no characters between the newlines for the pattern to match, so the blank line is skipped.\n\nIn contrast, the `open_issue_buffer` function in `lua/nvim-beads/issue.lua` uses a more robust method to split lines while preserving blank lines, which is why the full issue view is correct.","status":"closed","priority":0,"issue_type":"bug","assignee":"Claude","created_at":"2025-12-01T21:11:23.204504016-07:00","updated_at":"2025-12-02T17:38:38.532873799-07:00","closed_at":"2025-12-02T17:38:38.532873799-07:00","labels":["bug"]}
{"id":"nvim-beads-d59","title":"Create type definitions module (types.lua)","description":"Create lua/nvim-beads/types.lua module with type definitions and documentation for issue data structures used throughout the plugin. This will serve as the single source of truth for what fields exist on issue objects.","design":"Create lua/nvim-beads/types.lua with EmmyLua annotations.\n\nKey type definitions needed:\n\n1. **Issue** - Main type matching bd show --json output:\n   ```lua\n   ---@class Issue\n   ---@field id string\n   ---@field title string\n   ---@field description string|nil\n   ---@field design string|nil\n   ---@field acceptance_criteria string|nil\n   ---@field notes string|nil\n   ---@field status \"open\"|\"in_progress\"|\"blocked\"|\"closed\"\n   ---@field priority integer (0-4)\n   ---@field issue_type \"bug\"|\"feature\"|\"task\"|\"epic\"|\"chore\"\n   ---@field assignee string|nil\n   ---@field labels string[]|nil\n   ---@field created_at string (ISO 8601)\n   ---@field updated_at string (ISO 8601)\n   ---@field closed_at string|nil (ISO 8601)\n   ---@field external_ref string|nil\n   ---@field dependencies Dependency[]|nil\n   ---@field dependents Dependency[]|nil\n   ```\n\n2. **Dependency** - Dependency relationship type:\n   ```lua\n   ---@class Dependency\n   ---@field id string\n   ---@field title string\n   ---@field dependency_type \"blocks\"|\"related\"|\"parent-child\"|\"discovered-from\"\n   ```\n\nNote: The `parent` field shown in requirements doc frontmatter is derived from dependencies array where dependency_type == \"parent-child\"","acceptance_criteria":"- types.lua exists in lua/nvim-beads/\n- Contains EmmyLua type annotations for Issue and related types\n- All fields from bd JSON output are documented\n- Type definitions can be required by other modules\n- LSP provides autocompletion when using these types","status":"closed","priority":1,"issue_type":"task","assignee":"Claude","created_at":"2025-11-30T18:24:30.27172829-07:00","updated_at":"2025-11-30T18:36:35.2943781-07:00","closed_at":"2025-11-30T18:36:35.2943781-07:00"}
{"id":"nvim-beads-daa","title":"Implement template fetching and :BeadsCreateIssue command","description":"Implement the core `:BeadsCreateIssue \u003ctype\u003e` command that will be the entry point for creating new issues. This command needs to validate the issue type argument and initiate the template fetching workflow.\n\nThe command should accept one of the valid issue types: bug, feature, task, epic, or chore.\n\nThis is part of Iteration 5: Create New Issues from the implementation plan.","design":"**Location**: `lua/nvim-beads/commands.lua` and `lua/nvim-beads/core.lua`\n\n**Command Definition**:\n- Register `:BeadsCreateIssue` as a user command\n- Accept a single required argument `\u003ctype\u003e`\n- Validate that `\u003ctype\u003e` is one of: bug, feature, task, epic, chore\n- Show error message if type is invalid or missing\n\n**Template Fetching**:\n- Add function `fetch_template(issue_type)` in `core.lua`\n- Execute `bd template show --json \u003ctype\u003e` using async execution\n- Parse the JSON response (schema should match the template structure)\n- Handle errors (command not found, invalid type, JSON parse errors)\n- Return the parsed template data\n\n**Integration**:\n- Command handler should call `fetch_template()` and pass result to the buffer manager (to be implemented in next issue)","acceptance_criteria":"- [ ] `:BeadsCreateIssue task` successfully executes without error\n- [ ] Invalid type (e.g., `:BeadsCreateIssue invalid`) shows clear error message\n- [ ] Missing type argument shows helpful usage message\n- [ ] `fetch_template()` function correctly executes `bd template show --json \u003ctype\u003e`\n- [ ] Template JSON is correctly parsed and returned\n- [ ] Unit test: Mock `vim.system` and verify correct command construction\n- [ ] Unit test: Verify JSON parsing with sample template data\n- [ ] Unit test: Verify error handling for command failures","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-30T21:05:41.35042767-07:00","updated_at":"2025-11-30T21:14:53.915739947-07:00","closed_at":"2025-11-30T21:14:53.915739947-07:00"}
{"id":"nvim-beads-ekq","title":"Add Telescope action to open issue buffer on \u003cCR\u003e","description":"Enhance the existing Telescope beads_picker in `lua/telescope/_extensions/nvim_beads/init.lua` to handle the default action (Enter key).\n\nWhen a user presses `\u003cCR\u003e` on a selected issue in the Telescope picker:\n1. The picker should close\n2. The selected issue should be opened in a new buffer using `open_issue_buffer()`\n\nThis provides the primary workflow for navigating from the issue list to viewing/editing individual issues.","design":"Implementation using Telescope's action system:\n\n1. Import required modules:\n   - `require('telescope.actions')` for action utilities\n   - `require('telescope.actions.state')` for getting selected entry\n   - `require('nvim-beads.issue')` for open_issue_buffer function\n\n2. In the beads_picker configuration, add an `attach_mappings` function:\n   ```lua\n   attach_mappings = function(prompt_bufnr, map)\n     actions.select_default:replace(function()\n       local selection = action_state.get_selected_entry()\n       actions.close(prompt_bufnr)\n       require('nvim-beads.issue').open_issue_buffer(selection.value.id)\n     end)\n     return true\n   end\n   ```\n\n3. The `selection.value` will contain the full issue object from the finder\n4. Extract the issue ID and pass it to open_issue_buffer()\n\nThis is a small, focused change to the existing Telescope picker.","acceptance_criteria":"- [ ] Pressing `\u003cCR\u003e` in the Telescope picker closes the picker\n- [ ] The selected issue is opened in a new buffer via open_issue_buffer()\n- [ ] The correct issue ID is passed to open_issue_buffer()\n- [ ] Manual testing confirms the workflow: :Beads -\u003e select issue -\u003e press Enter -\u003e buffer opens\n- [ ] Error handling from open_issue_buffer() is preserved (errors display correctly)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-30T19:04:40.00089807-07:00","updated_at":"2025-11-30T20:01:52.884162726-07:00","closed_at":"2025-11-30T20:01:52.884162726-07:00","dependencies":[{"issue_id":"nvim-beads-ekq","depends_on_id":"nvim-beads-p69","type":"blocks","created_at":"2025-11-30T19:04:47.576511663-07:00","created_by":"daemon"}]}
{"id":"nvim-beads-esz","title":"Add unit tests for issue formatter","description":"Create comprehensive unit tests for the format_issue_to_markdown function in spec/nvim-beads/issue_spec.lua using busted test framework.","design":"Test cases to cover (using busted framework):\n\n1. **Full issue with all fields** - Verify complete YAML frontmatter and all 4 markdown sections\n2. **Minimal issue** - Only required fields (id, title, type, status, priority, created_at, updated_at)\n3. **Issue with parent and dependencies** - Verify parent field separate from dependencies list in frontmatter\n4. **Issue with labels** - Verify YAML list format for labels\n5. **Issue with closed_at** - Verify closed issue shows closed_at timestamp\n6. **Empty optional fields** - Verify description/design/acceptance_criteria/notes sections omitted when null\n7. **Multi-line content** - Verify multi-line strings in description/design/etc preserved correctly\n8. **Single # headings** - Assert sections use `# Description` not `## Description`\n9. **Field name mapping** - Verify `issue_type: task` in bd JSON becomes `type: task` in frontmatter\n\nEach test:\n- Create sample issue table matching bd JSON schema\n- Call format_issue_to_markdown\n- Assert YAML frontmatter structure\n- Assert markdown section headings use single #\n- Assert dependencies in frontmatter, not body\n- Verify no ## headings appear in output","acceptance_criteria":"- spec/nvim-beads/issue_spec.lua exists\n- All 9+ test cases implemented\n- Tests verify single # headings (not ##)\n- Tests verify dependencies in YAML frontmatter\n- Tests verify parent as separate frontmatter field\n- Tests verify issue_type -\u003e type mapping\n- Tests pass with busted\n- Can run with: busted spec/nvim-beads/issue_spec.lua","status":"closed","priority":1,"issue_type":"task","assignee":"Claude","created_at":"2025-11-30T18:24:30.762150142-07:00","updated_at":"2025-11-30T18:48:41.020440616-07:00","closed_at":"2025-11-30T18:48:41.020440616-07:00","dependencies":[{"issue_id":"nvim-beads-esz","depends_on_id":"nvim-beads-akf","type":"blocks","created_at":"2025-11-30T18:24:46.13676299-07:00","created_by":"daemon"}]}
{"id":"nvim-beads-k8m","title":"Implement basic Telescope picker","description":"Create a Telescope picker in lua/telescope/_extensions/nvim_beads/init.lua that displays a list of issues from 'bd list --json' with ID and title.","design":"Use telescope's finders.new_async for async data loading. Entry maker creates { value = issue, display = id .. ': ' .. title, ordinal = title } for fuzzy search. Reference list-command-schema.json for data structure.","acceptance_criteria":"- Telescope extension registered and loadable\n- beads_picker function implemented\n- Uses finders.new_async to run 'bd list --json'\n- entry_maker transforms issues into picker entries\n- Display format: 'ID: Title'\n- Picker opens and shows issue list","status":"closed","priority":1,"issue_type":"task","assignee":"Claude","created_at":"2025-11-30T17:08:47.884580337-07:00","updated_at":"2025-11-30T18:12:22.610953439-07:00","closed_at":"2025-11-30T18:12:22.610953439-07:00","dependencies":[{"issue_id":"nvim-beads-k8m","depends_on_id":"nvim-beads-7zt","type":"blocks","created_at":"2025-11-30T17:09:20.495242365-07:00","created_by":"daemon"},{"issue_id":"nvim-beads-k8m","depends_on_id":"nvim-beads-3ip","type":"blocks","created_at":"2025-11-30T17:09:21.452023184-07:00","created_by":"daemon"}]}
{"id":"nvim-beads-ku4","title":"Fix Beads create when no template is available","description":"'Beads create \u003ctype\u003e' takes an issue type and looks up a template, but there may not be a template specified for that type. We need to handle this case.","acceptance_criteria":"- [ ] If no template exists for an issue type, apply a default template containing empty sections for each of \"Description\", \"Acceptance Criteria\", and \"Design\".","status":"closed","priority":0,"issue_type":"bug","assignee":"claude","created_at":"2025-12-01T22:20:41.546027389-07:00","updated_at":"2025-12-02T17:51:28.934542777-07:00","closed_at":"2025-12-02T17:51:28.934542777-07:00"}
{"id":"nvim-beads-kzq","title":"Add support for apply filtering in Beads list","description":"## Feature Request\n\nThe objective is to modify the `Beads list` command to accept zero, one, or two optional arguments corresponding to `[state]` and `[type]`. The Telescope window will then display only the issues that match the specified criteria.\n\n**Command Signature:** `Beads list [state] [type]`\n\n**Examples:**\n*   `Beads list open bugs` (Filters for open bugs)\n*   `Beads list ready` (Filters for issues in the 'ready' state)\n*   `Beads list features` (Filters for issues of type 'feature')\n*   `Beads list` (Shows all issues, current behavior)\n\n## Motivation\n\nFiltering ensures users are able to view the issues they most care about. Having the ability to apply these filters when invoking the command enables users to bind keys to specific sets of desired filters.","design":"See the [high-level design](doc/dev/design/beads-list-filtering-design.md).","acceptance_criteria":"This feature has been broken down into tasks, and each one has their own acceptance criteria.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-01T22:13:02.725540352-07:00","updated_at":"2025-12-02T18:17:53.583871266-07:00","labels":["feature"],"dependencies":[{"issue_id":"nvim-beads-kzq","depends_on_id":"nvim-beads-q2g","type":"blocks","created_at":"2025-12-01T22:13:02.740266654-07:00","created_by":"daemon"},{"issue_id":"nvim-beads-kzq","depends_on_id":"nvim-beads-tjz","type":"blocks","created_at":"2025-12-01T22:13:02.743692708-07:00","created_by":"daemon"},{"issue_id":"nvim-beads-kzq","depends_on_id":"nvim-beads-2s7","type":"blocks","created_at":"2025-12-01T22:13:02.744634856-07:00","created_by":"daemon"},{"issue_id":"nvim-beads-kzq","depends_on_id":"nvim-beads-6p1","type":"blocks","created_at":"2025-12-01T22:13:02.745569341-07:00","created_by":"daemon"},{"issue_id":"nvim-beads-kzq","depends_on_id":"nvim-beads-7nn","type":"blocks","created_at":"2025-12-01T22:13:02.746393136-07:00","created_by":"daemon"}]}
{"id":"nvim-beads-loc","title":"Create Centralized Mock Environment Helper","description":"**Observation:**\nSignificant code duplication exists across multiple spec files (`autocmd_integration_spec.lua`, `issue_spec.lua`, `new_issue_buffer_spec.lua`) for mocking Neovim APIs (`vim.api.*`, `vim.notify`, `vim.system`). This makes tests verbose, hard to maintain, and brittle.\n\n**Recommendation:**\nCreate a new test utility (e.g., `spec/test_utilities/env.lua`) to provide a reusable function for setting up and tearing down a fully mocked test environment. This will centralize mocking logic, reduce boilerplate, and improve maintainability.\n\n**Validation Steps:**\n1. Create the new `spec/test_utilities/env.lua` module.\n2. Refactor one of the affected files, like `spec/nvim-beads/new_issue_buffer_spec.lua`, to use the new helper.\n3. Verify that all tests in the refactored file still pass.\n4. Apply the same refactoring to other affected spec files (`autocmd_integration_spec.lua`, `issue_spec.lua`).","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-01T21:03:50.380989559-07:00","updated_at":"2025-12-02T20:29:46.055395457-07:00","closed_at":"2025-12-02T20:29:46.055395457-07:00"}
{"id":"nvim-beads-m9f","title":"Implement Content Parser with Tests","description":"Implement the `parse_markdown_to_issue(buffer_content)` function in `lua/nvim-beads/issue.lua` to parse buffer content (YAML frontmatter + Markdown sections) back into a Lua table structure.\n\nThis is the first step in Iteration 4: enabling users to edit and save existing issues from beads:// buffers.","design":"**Input:** List of strings representing buffer lines (from `vim.api.nvim_buf_get_lines()`)\n\n**Output:** Lua table with structure matching the issue schema:\n- YAML frontmatter fields: id, title, type, status, priority, parent, dependencies, labels, timestamps\n- Markdown sections: description, acceptance_criteria, design, notes\n\n**Implementation approach:**\n1. Use simple regex/string splitting to parse YAML frontmatter (between `---` delimiters)\n2. Parse Markdown sections by detecting `# Section Name` headers\n3. Handle multi-line content for each section\n4. Return structured table\n\n**Key considerations:**\n- Read-only fields (id, timestamps) should still be parsed for reference\n- Handle optional fields gracefully (parent, dependencies, labels may be empty)\n- Section content should preserve formatting (newlines, indentation)","acceptance_criteria":"- [ ] Test file created at `spec/nvim-beads/issue_parse_spec.lua`\n- [ ] Test cases cover:\n  - [ ] Parsing valid YAML frontmatter with all fields\n  - [ ] Parsing valid YAML frontmatter with optional fields missing\n  - [ ] Parsing all four Markdown sections (Description, Acceptance Criteria, Design, Notes)\n  - [ ] Handling multi-line section content\n  - [ ] Handling empty sections\n- [ ] `parse_markdown_to_issue()` function implemented in `lua/nvim-beads/issue.lua`\n- [ ] All tests pass when run with `busted`\n- [ ] Parser correctly extracts all fields into the expected table structure","status":"closed","priority":1,"issue_type":"task","assignee":"Claude","created_at":"2025-11-30T20:10:29.000860442-07:00","updated_at":"2025-11-30T20:18:09.243905763-07:00","closed_at":"2025-11-30T20:18:09.243905763-07:00"}
{"id":"nvim-beads-mev","title":"Core plugin cleanup","description":"The code within the plugin is generally pretty solid, but we can refactor it and clean it up a bit. This task captures those little cleanup jobs.","acceptance_criteria":"See the dependent tickets for individual acceptance criteria. This ticket will be closed when those dependent tickets are closed.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-01T22:26:57.506739741-07:00","updated_at":"2025-12-02T20:35:36.781061956-07:00","closed_at":"2025-12-02T20:35:36.781061956-07:00","dependencies":[{"issue_id":"nvim-beads-mev","depends_on_id":"nvim-beads-3tc","type":"blocks","created_at":"2025-12-01T22:26:57.508912332-07:00","created_by":"daemon"},{"issue_id":"nvim-beads-mev","depends_on_id":"nvim-beads-ctb","type":"blocks","created_at":"2025-12-01T22:26:57.511339836-07:00","created_by":"daemon"},{"issue_id":"nvim-beads-mev","depends_on_id":"nvim-beads-2s3","type":"blocks","created_at":"2025-12-01T22:26:57.513411299-07:00","created_by":"daemon"},{"issue_id":"nvim-beads-mev","depends_on_id":"nvim-beads-5do","type":"blocks","created_at":"2025-12-01T22:26:57.515520984-07:00","created_by":"daemon"}]}
{"id":"nvim-beads-n1c","title":"Adopt Data-Driven Patterns","description":"**Observation:**\nTest files like `commands_spec.lua`, `create_command_spec.lua`, and `diff_spec.lua` contain many repetitive `it` blocks testing minor variations of the same function. This is verbose and hard to maintain. For example, `commands_spec.lua` has separate tests for title, priority, and assignee changes which all test similar logic.\n\n**Recommendation:**\nRefactor these tests to be data-driven. Define a table of test cases (containing a name, input, and expected output) and iterate over it within a single `describe` block. This will make the tests more concise, easier to read, and simpler to extend with new cases.\n\n**Validation Steps:**\n1. Select `spec/nvim-beads/commands_spec.lua` as the first candidate for refactoring.\n2. Refactor a `describe` block (e.g., 'metadata field updates') to use a table of test cases and a loop.\n3. Ensure all original test logic is covered and that all tests pass after the change.\n4. Apply the same data-driven pattern to other sections of the file and to other suitable spec files.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-01T21:03:50.415626667-07:00","updated_at":"2025-12-02T20:45:20.316517898-07:00","closed_at":"2025-12-02T20:45:20.316517898-07:00"}
{"id":"nvim-beads-nu7","title":"Create :BeadsOpenIssue command for direct issue buffer access","description":"Add a new user command `:BeadsOpenIssue \u003cid\u003e` that provides direct access to opening an issue buffer without going through the Telescope picker.\n\nThis command:\n- Takes a single required argument (the issue ID)\n- Calls `open_issue_buffer()` with the provided ID\n- Provides a faster workflow when the user knows the exact issue ID they want to open\n\nThe command should be defined in `lua/nvim-beads/commands.lua` or the appropriate commands module.","design":"Implementation:\n\n1. Define the command using `vim.api.nvim_create_user_command()`:\n   ```lua\n   vim.api.nvim_create_user_command('BeadsOpenIssue', function(opts)\n     require('nvim-beads.issue').open_issue_buffer(opts.args)\n   end, {\n     nargs = 1,\n     desc = 'Open a beads issue by ID in a buffer',\n   })\n   ```\n\n2. The command should be registered when the plugin loads (likely in plugin/nvim-beads.lua or commands.lua)\n\n3. The `opts.args` will contain the issue ID string provided by the user\n\n4. Error handling (invalid ID, etc.) is delegated to open_issue_buffer()\n\n5. Consider adding completion in the future (post-MVP) to suggest issue IDs","acceptance_criteria":"- [ ] Command `:BeadsOpenIssue \u003cid\u003e` is registered and available\n- [ ] Running `:BeadsOpenIssue bd-123` opens the issue buffer for bd-123\n- [ ] Invalid issue IDs result in appropriate error messages (via open_issue_buffer's error handling)\n- [ ] Command requires exactly one argument (enforced by nargs = 1)\n- [ ] Manual testing confirms: `:BeadsOpenIssue bd-X` successfully opens the buffer\n- [ ] Command is documented (at minimum via the desc field)","status":"closed","priority":1,"issue_type":"task","assignee":"Claude","created_at":"2025-11-30T19:04:41.062294051-07:00","updated_at":"2025-11-30T20:05:25.469632564-07:00","closed_at":"2025-11-30T20:05:25.469632564-07:00","dependencies":[{"issue_id":"nvim-beads-nu7","depends_on_id":"nvim-beads-p69","type":"blocks","created_at":"2025-11-30T19:04:47.723922536-07:00","created_by":"daemon"}]}
{"id":"nvim-beads-p69","title":"Implement open_issue_buffer() to fetch and display issues in beads:// buffers","description":"Create the core buffer manager function `open_issue_buffer(issue_id)` in `lua/nvim-beads/issue.lua` that:\n1. Executes `bd show --json \u003cissue_id\u003e` to fetch issue data\n2. Formats the data using the extended formatter\n3. Creates a new buffer with the naming scheme `beads://issue/\u003cissue_id\u003e`\n4. Populates the buffer with formatted content\n5. Configures the buffer with appropriate settings (filetype markdown, buffer options)\n\nThis function serves as the foundation for opening issues from Telescope and from the user command.","design":"Implementation approach:\n1. Use `vim.system()` to execute `bd show --json \u003cissue_id\u003e` asynchronously\n2. Parse JSON response and handle errors (invalid ID, command failures)\n3. Call the formatter to convert issue data to buffer content\n4. Create buffer using `vim.api.nvim_create_buf()`\n5. Set buffer name using `vim.api.nvim_buf_set_name()` with `beads://issue/\u003cissue_id\u003e`\n6. Set buffer lines using `vim.api.nvim_buf_set_lines()`\n7. Configure buffer options:\n   - `filetype = 'markdown'`\n   - `buftype = 'acwrite'` (for custom save handling in future iteration)\n   - `bufhidden = 'hide'`\n8. Open buffer in current window with `vim.api.nvim_set_current_buf()`\n9. Handle errors gracefully with vim.notify\n\nConsider reusing the bd executor function from core.lua if it exists.","acceptance_criteria":"- [ ] Function `open_issue_buffer(issue_id)` exists in lua/nvim-beads/issue.lua\n- [ ] Function executes `bd show --json \u003cissue_id\u003e` to fetch issue data\n- [ ] Errors (invalid ID, missing bd command) are caught and reported via vim.notify\n- [ ] Buffer is created with name `beads://issue/\u003cissue_id\u003e`\n- [ ] Buffer filetype is set to 'markdown'\n- [ ] Buffer is populated with formatted content (YAML frontmatter + Markdown)\n- [ ] Buffer is displayed in the current window\n- [ ] Unit tests verify correct bd command execution and error handling\n- [ ] Unit tests verify buffer creation and configuration (can use mock vim API)","status":"closed","priority":1,"issue_type":"task","assignee":"Claude","created_at":"2025-11-30T19:04:38.959352324-07:00","updated_at":"2025-11-30T19:21:24.628665133-07:00","closed_at":"2025-11-30T19:21:24.628665133-07:00","dependencies":[{"issue_id":"nvim-beads-p69","depends_on_id":"nvim-beads-2ry","type":"blocks","created_at":"2025-11-30T19:04:47.455400327-07:00","created_by":"daemon"}]}
{"id":"nvim-beads-q2g","title":"Apply state and type filters in Telescope finder","description":"This task implements the core filtering logic within the Telescope extension, applying the parsed filters to the list of issues.","design":"### Background\nOnce the filter arguments are parsed, the final step is to apply them. This involves fetching the complete list of issues from the `bd` command-line tool and then filtering this list in Lua before handing it off to the Telescope finder for display.\n\n### Implementation Details\n- **File to Modify:** `lua/telescope/_extensions/nvim_beads/init.lua`\n- **Function to Modify:** The main function that launches the beads picker.\n- **Logic:**\n    1.  This function will now receive the parsed filter table (e.g., `{ state = 'open', type = 'bug' }`) from the core module.\n    2.  Fetch the complete list of issues by executing `bd list --json`.\n    3.  Decode the JSON response into a Lua table of issue objects.\n    4.  *Before* creating the `finders.new_table`, iterate over the list of all issues.\n    5.  For each issue, check if it matches the criteria in the parsed filter table.\n        - If `filters.state` is specified (and not `'all'`), the issue's `status` must match.\n        - If `filters.type` is specified (and not `'all'`), the issue's `issue_type` must match.\n    6.  An issue is kept only if it matches all specified filters.\n    7.  Create a new table containing only the filtered issues.\n    8.  Pass this pre-filtered table to the `results` option of `finders.new_table`.","acceptance_criteria":"- Running `:Beads list open bug` shows only issues that are both 'open' and of type 'bug'.\n- Running `:Beads list closed` shows all issues with the status 'closed', regardless of type.\n- Running `:Beads list features` shows all issues of type 'feature', regardless of state.\n- Running `:Beads list` with no arguments continues to show all issues.\n- Running `:Beads list all all` is equivalent to running `:Beads list` with no arguments.\n- The filtering is performed in Lua and does not modify the underlying `bd` command being called (it should still be `bd list --json`).","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-01T21:44:07.593632206-07:00","updated_at":"2025-12-02T21:03:38.496682634-07:00","closed_at":"2025-12-02T21:03:38.496682634-07:00"}
{"id":"nvim-beads-qje","title":"Unit tests for core bd executor","description":"Create spec file for core.lua with tests that mock vim.system and verify JSON parsing and error handling.","design":"Use busted framework as specified in neovim-lua-plugin-reference.md. Mock vim.system to return controlled output. Test both happy path and error conditions (command failure, invalid JSON).","acceptance_criteria":"- spec/nvim-beads/core_spec.lua created\n- Test for successful bd command execution and JSON parsing\n- Test for command failure handling\n- Test for JSON parse error handling\n- Tests use mocked vim.system\n- All tests pass","status":"closed","priority":2,"issue_type":"task","assignee":"Claude","created_at":"2025-11-30T17:08:49.751819601-07:00","updated_at":"2025-11-30T18:17:49.012403048-07:00","closed_at":"2025-11-30T18:00:38.898435116-07:00","dependencies":[{"issue_id":"nvim-beads-qje","depends_on_id":"nvim-beads-3ip","type":"blocks","created_at":"2025-11-30T17:09:23.315607188-07:00","created_by":"daemon"}]}
{"id":"nvim-beads-rwx","title":"Refactor unit test suite","description":"The unit test suite has got its flaws, so our goal is to refactor it to reduce duplication, eliminate redundant or low-value tests, and in general make the suite more maintainable.","acceptance_criteria":"This task has been broken out into a series of dependent tasks capturing the individual acceptance criteria.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-01T22:24:26.146044232-07:00","updated_at":"2025-12-02T20:47:15.743794794-07:00","closed_at":"2025-12-02T20:47:15.743813117-07:00","dependencies":[{"issue_id":"nvim-beads-rwx","depends_on_id":"nvim-beads-n1c","type":"blocks","created_at":"2025-12-01T22:24:26.149432371-07:00","created_by":"daemon"},{"issue_id":"nvim-beads-rwx","depends_on_id":"nvim-beads-loc","type":"blocks","created_at":"2025-12-01T22:24:26.150773245-07:00","created_by":"daemon"}]}
{"id":"nvim-beads-tjz","title":"Create argument parser for 'Beads list' filters","description":"This task involves creating a dedicated Lua function to parse and validate the filter arguments passed to the 'Beads list' command.","design":"### Background\nTo filter issues by state and type, the raw string arguments from the command line (e.g., `{'open', 'bugs'}`) must be parsed into a structured format that the filtering logic can use. This parser will be responsible for interpreting the arguments and validating them against known states and types.\n\n### Implementation Details\n- **File to Create/Modify:** `lua/nvim-beads/core.lua`\n- **New Function:** `parse_list_filters(fargs)`\n- **Logic:**\n    1.  The function will accept the `fargs` table from the user command.\n    2.  It will enforce a strict positional order: `[state] [type]`.\n    3.  Define canonical lists of valid `states` and `types`. This information should be sourced from `doc/dev/reference/list-command-schema.json`.\n    4.  Implement logic to handle plural forms of types (e.g., map \"bugs\" to \"bug\", \"features\" to \"feature\").\n    5.  The special keyword `all` should be treated as a wildcard (i.e., no filter).\n    6.  The function should return a table representing the parsed filters, e.g., `{ state = 'open', type = 'bug' }`. If a filter is not provided, its value should be `nil`.","acceptance_criteria":"- `parse_list_filters({'open', 'bugs'})` returns `{ state = 'open', type = 'bug' }`.\n- `parse_list_filters({'ready'})` returns `{ state = 'ready', type = nil }`.\n- `parse_list_filters({'features'})` returns `{ state = nil, type = 'feature' }`.\n- `parse_list_filters({'all', 'tasks'})` returns `{ state = 'all', type = 'task' }`.\n- `parse_list_filters({})` returns `{ state = nil, type = nil }`.\n- The function correctly identifies all valid states and types as defined in the project's JSON schema.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-01T21:43:56.647872781-07:00","updated_at":"2025-12-02T20:12:07.294369532-07:00","closed_at":"2025-12-02T20:12:07.294369532-07:00"}
{"id":"nvim-beads-v3m","title":"Implement Diff Logic with Tests","description":"Implement the comparison/diff logic to detect what changed between the original issue state (from `bd show --json`) and the modified buffer state (from the parser).\n\nThis is a pure function that takes two issue tables and returns a structured list of changes, which will be used to generate the appropriate `bd` commands.","design":"**Function signature:** `diff_issues(original, modified) -\u003e changes`\n\n**Input:**\n- `original`: Issue table from `bd show --json`\n- `modified`: Issue table from `parse_markdown_to_issue()`\n\n**Output:** Table of changes, structured by field type:\n```lua\n{\n  metadata = { title = \"new title\", priority = 1 },\n  status = \"in_progress\",\n  labels = { add = {\"ui\", \"backend\"}, remove = {\"old-label\"} },\n  dependencies = { add = {\"bd-120\"}, remove = {\"bd-100\"} },\n  parent = \"bd-50\",  -- or nil if removed\n  sections = { description = \"...\", acceptance_criteria = \"...\", design = \"...\", notes = \"...\" }\n}\n```\n\n**Implementation approach:**\n1. Compare each field type separately\n2. For labels and dependencies: compute set differences (additions vs removals)\n3. For parent: detect add/remove/change\n4. For text fields: simple equality check\n5. Only include changed fields in output\n\n**Key considerations:**\n- Ignore read-only fields (id, timestamps)\n- Handle nil/empty values correctly\n- Parent changes affect dependencies (parent-child relationship)","acceptance_criteria":"- [ ] Test file created at `spec/nvim-beads/diff_spec.lua`\n- [ ] Test cases cover:\n  - [ ] No changes detected when states are identical\n  - [ ] Metadata changes (title, priority)\n  - [ ] Status changes\n  - [ ] Label additions, removals, and both\n  - [ ] Dependency additions, removals, and both\n  - [ ] Parent field add, remove, and change\n  - [ ] Text section changes (description, acceptance_criteria, design, notes)\n  - [ ] Multiple simultaneous changes across different field types\n- [ ] `diff_issues()` function implemented in `lua/nvim-beads/issue.lua`\n- [ ] All tests pass when run with `busted`\n- [ ] Function correctly identifies all change types","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-30T20:11:02.589478335-07:00","updated_at":"2025-11-30T20:22:14.699642826-07:00","closed_at":"2025-11-30T20:22:14.699642826-07:00","dependencies":[{"issue_id":"nvim-beads-v3m","depends_on_id":"nvim-beads-m9f","type":"blocks","created_at":"2025-11-30T20:11:02.591709348-07:00","created_by":"daemon"}]}
{"id":"nvim-beads-w09","title":"Implement new issue buffer manager (open_new_issue_buffer)","description":"Implement the `open_new_issue_buffer(issue_type, template_data)` function that creates and populates a new buffer for issue creation. The buffer should be pre-filled with the template data in the standard Markdown format with YAML frontmatter.\n\nThis buffer will use the special URI scheme `beads://issue/new?type=\u003ctype\u003e` to distinguish it from existing issue buffers.\n\nThis is part of Iteration 5: Create New Issues from the implementation plan.","design":"**Location**: `lua/nvim-beads/issue.lua`\n\n**Function Signature**:\n```lua\nfunction M.open_new_issue_buffer(issue_type, template_data)\n```\n\n**Buffer Creation**:\n- Create new buffer with name: `beads://issue/new?type=\u003ctype\u003e`\n- Set buffer options: `buftype=acwrite`, `filetype=markdown`\n- Mark as modified initially (since it's unsaved)\n\n**Content Population**:\n- Build YAML frontmatter with template defaults:\n  - `id: (new)` - placeholder to indicate unsaved state\n  - `title: \"\"` - empty, user must fill\n  - `type: \u003cissue_type\u003e`\n  - `status: open`\n  - `priority: \u003cfrom template or 2\u003e`\n  - Other metadata fields as empty/null\n- Build Markdown sections from template (Description, Acceptance Criteria, Design, Notes)\n- Use existing `format_issue_to_markdown()` or create variant for new issues\n- Set buffer lines with formatted content\n\n**Cursor Positioning**:\n- Position cursor on the title field for immediate editing","acceptance_criteria":"- [ ] `open_new_issue_buffer(\"task\", template_data)` creates buffer with correct name\n- [ ] Buffer is created with `buftype=acwrite` and `filetype=markdown`\n- [ ] YAML frontmatter contains correct fields with template defaults\n- [ ] Title field is empty string (ready for user input)\n- [ ] Status is set to \"open\"\n- [ ] Markdown sections are populated from template data\n- [ ] Cursor is positioned on title field after buffer creation\n- [ ] Unit test: Verify buffer content format with sample template\n- [ ] Unit test: Verify all required YAML fields are present\n- [ ] Unit test: Verify Markdown sections are correctly formatted","status":"closed","priority":1,"issue_type":"task","assignee":"claude","created_at":"2025-11-30T21:06:12.459379269-07:00","updated_at":"2025-11-30T21:20:56.515150727-07:00","closed_at":"2025-11-30T21:20:56.515150727-07:00","dependencies":[{"issue_id":"nvim-beads-w09","depends_on_id":"nvim-beads-daa","type":"blocks","created_at":"2025-11-30T21:06:12.462084861-07:00","created_by":"daemon"}]}
{"id":"nvim-beads-wq2","title":"Beads command centralization","description":"As a Neovim user, I want all nvim-beads commands collected as subcommands\nunder the Beads main command so that I have a consistent command pattern\nI can learn.\n\n## Feature Request\n\nBroadly speaking, Vim/Neovim plugins are moving to a model with a single\nmain command (e.g. 'Git' in fugitive, 'Telescope' in telescope, etc) with\nsub-commands.\n\nThis project started off by building multiple main commands, which isn't\ndesirable, so the goal of this ticket is to fix that, centralizing all\nthose commands under the Beads command.","acceptance_criteria":"- [ ] 'BeadsCreateIssue type' becomes 'Beads create type'\n- [ ] 'Beads' becomes 'Beads list' (and that will eventually take a status type filter option)\n- [ ] 'BeadsOpenIssue id' becomes 'Beads open id'","status":"closed","priority":2,"issue_type":"feature","assignee":"Brett Kosinski","created_at":"2025-11-30T22:25:14.528911332-07:00","updated_at":"2025-11-30T22:26:56.258921296-07:00","closed_at":"2025-11-30T22:26:56.258921296-07:00"}
{"id":"nvim-beads-zzt","title":"Implement Telescope buffer previewer","description":"Add a buffer previewer to the Telescope beads_picker that shows formatted issue content when hovering over issues in the list. Uses bd show --json to fetch full issue data and format_issue_to_markdown to display it.","design":"In lua/telescope/_extensions/nvim_beads/init.lua:\n\n1. Import previewers from telescope\n2. Create previewer using previewers.new_buffer_previewer({\n     title = \"Issue Preview\",\n     define_preview = function(self, entry, status)\n       - Extract issue_id from entry.value\n       - Call bd show --json \u003cissue_id\u003e asynchronously\n       - Parse JSON response\n       - Call format_issue_to_markdown(issue)\n       - Write lines to preview buffer (vim.api.nvim_buf_set_lines)\n       - Set filetype to markdown for syntax highlighting\n       - Handle errors gracefully (show error message in preview)\n     end\n   })\n3. Add previewer to beads_picker configuration\n\nPerformance: Keep simple for now (no caching), bd show is fast enough","acceptance_criteria":"- Telescope picker shows preview pane when enabled\n- Hovering over issue in list shows formatted content in preview\n- Preview contains YAML frontmatter with correct format per requirements doc section 3.2\n- Preview shows single # headings for Description/Design/Acceptance Criteria/Notes sections\n- Dependencies shown in YAML frontmatter, not markdown body\n- Markdown syntax highlighting is applied\n- Preview updates when cursor moves to different issue\n- Errors from bd show are displayed gracefully\n- Works with existing :Beads command","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-30T18:24:31.0020946-07:00","updated_at":"2025-11-30T18:54:39.76604869-07:00","closed_at":"2025-11-30T18:54:39.76604869-07:00","dependencies":[{"issue_id":"nvim-beads-zzt","depends_on_id":"nvim-beads-esz","type":"blocks","created_at":"2025-11-30T18:24:46.29518575-07:00","created_by":"daemon"}]}
